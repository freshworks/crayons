var __spreadArray=this&&this.__spreadArray||function(e,t){for(var r=0,n=t.length,o=e.length;r<n;r++,o++)e[o]=t[r];return e};System.register(["./index-c04bc24f.system.js","./index-8c48a083.system.js"],(function(e){"use strict";var t,r,n,o,i,a,s;return{setters:[function(e){t=e.r;r=e.h;n=e.i;o=e.k;i=e.j},function(e){a=e.d;s=e.c}],execute:function(){var d;var c=[];var l={sortable:false,acceptFrom:"",placeholderClass:"",copy:true,addOnDrop:true};var p=function(){function e(e,t){var r=this;this.childElements=[];this.acceptFrom=[];this.dropped=false;this.debouncedSetElement=a((function(e,t,n){if(r.cancelDebouncedDrag){return}var o=r.getDragAfterElement(e,n);var i;if(t.parentElement.id===r.dragContainer.id){i=t}else{r.placeholder||(r.placeholder=r.createPlaceholder(t));i=r.placeholder}r.addElement(i,o)}),this,5);this.onDragStart=function(e){d=e.target;r.dropped=false;r.cancelDebouncedDrag=false;e.dataTransfer.setData("text/plain",d.id);r.childElements=Array.from(r.dragContainer.children);var t=r.childElements.indexOf(d);r.nextSibling=r.childElements[t+1];r.childElements.splice(t,1);e.stopPropagation()};this.onDragEnter=function(e){if(!r.canAcceptDragElement()){return}var t=e.composedPath().find((function(e){return e.id===r.dragContainer.id}));if(t&&t!==r.previousContainer){r.childElements=Array.from(r.dragContainer.children);r.cancelDebouncedDrag=false}r.previousContainer=t};this.onDragLeave=function(e){if(!r.canAcceptDragElement()){return}var t=e.fromElement||e.relatedTarget;if(!e.currentTarget.contains(t)){var n=r.getMatchingHost(t,r.dragContainer.children[0].tagName);if(!e.currentTarget.contains(n)){r.previousContainer=undefined}}};this.onDragOver=function(e){e.preventDefault();if(!r.canAcceptDragElement()){return}r.debouncedSetElement(r.childElements,d,e.clientY)};this.onDragEnd=function(e){if((!r.dropped||c.length>0)&&d){r.addElement(d,r.nextSibling);r.removePlaceholder()}r.resetData(e)};this.onDrop=function(e){if(!r.canAcceptDragElement()){return}r.dropped=true;var t=d.parentElement.id;var n=r.placeholder||d;var o=__spreadArray([],r.dragContainer.children).indexOf(n);if(r.placeholder){if(r.options.addOnDrop){var i=r.options.copy?s(d,true,true):d;r.placeholder.replaceWith(i)}else{r.removePlaceholder()}}r.dragContainer.dispatchEvent(new CustomEvent("fwDropBase",{cancelable:true,bubbles:false,detail:{droppedElement:d,droppedIndex:o,dragFromId:t,dropToId:r.dragContainer.id}}));r.resetData(e)};this.dragContainer=e;this.options=Object.assign({},l,t);this.acceptFrom=this.options.acceptFrom?this.options.acceptFrom.split(","):[];this.options.sortable&&this.acceptFrom.push(this.dragContainer.id);this.addListeners()}e.prototype.addListeners=function(){this.dragContainer.addEventListener("dragstart",this.onDragStart);this.dragContainer.addEventListener("dragend",this.onDragEnd);this.dragContainer.addEventListener("dragenter",this.onDragEnter);this.dragContainer.addEventListener("dragleave",this.onDragLeave);this.dragContainer.addEventListener("dragover",this.onDragOver);this.dragContainer.addEventListener("drop",this.onDrop)};e.prototype.removeListeners=function(){this.dragContainer.removeEventListener("dragstart",this.onDragStart);this.dragContainer.removeEventListener("dragend",this.onDragEnd);this.dragContainer.removeEventListener("dragenter",this.onDragEnter);this.dragContainer.removeEventListener("dragleave",this.onDragLeave);this.dragContainer.removeEventListener("dragover",this.onDragOver);this.dragContainer.removeEventListener("drop",this.onDrop)};e.prototype.getDragAfterElement=function(e,t){return e.reduce((function(e,r){var n=r.getBoundingClientRect();var o=t-n.top-n.height/2;if(o<0&&o>e.offset){return{offset:o,element:r}}else{return e}}),{offset:Number.NEGATIVE_INFINITY}).element};e.prototype.createPlaceholder=function(e){var t;var r=this.options.placeholderClass;var n=this.dragContainer.tagName;var o;if(["UL","OL"].includes(n)){o=document.createElement("li")}else if(["TABLE","TBODY"].includes(n)){o=document.createElement("tr");o.innerHTML='<td colspan="100"></td>'}else{o=document.createElement("div")}if(typeof r==="string"&&r){(t=o.classList).add.apply(t,r.split(" "))}else{o.style.height=this.getElementHeight(e)+"px";o.style.width=this.getElementWidth(e)+"px"}c.push(o);return o};e.prototype.removePlaceholder=function(){c.forEach((function(e){e.remove()}))};e.prototype.addElement=function(e,t){if(t){if(this.canInsertBefore(t)&&!(e===null||e===void 0?void 0:e.isSameNode(t))){this.dragContainer.insertBefore(e,t)}return}this.canAppendTo(this.dragContainer)&&this.dragContainer.appendChild(e)};e.prototype.canAcceptDragElement=function(){if(!d){return false}var e=d.parentElement.id;return this.acceptFrom.includes(e)};e.prototype.canInsertBefore=function(e){return e&&e.pinned!=="top"};e.prototype.canAppendTo=function(e){return e.lastElementChild.pinned!=="bottom"};e.prototype.getHost=function(e){return e.getRootNode().host};e.prototype.getMatchingHost=function(e,t){var r=e;while(r){r=this.getHost(r);if(r&&r.tagName===t){return r}}return undefined};e.prototype.resetData=function(e){e.dataTransfer.clearData();this.previousContainer=undefined;d=undefined;this.placeholder=undefined;this.cancelDebouncedDrag=true};e.prototype.getElementHeight=function(e){if(!(e instanceof HTMLElement)){throw new Error("You must provide a valid dom element")}var t=window.getComputedStyle(e);if(t.getPropertyValue("box-sizing")==="border-box"){return parseInt(t.getPropertyValue("height"),10)}return["height","padding-top","padding-bottom"].map((function(e){var r=parseInt(t.getPropertyValue(e),10);return isNaN(r)?0:r})).reduce((function(e,t){return e+t}))};e.prototype.getElementWidth=function(e){if(!(e instanceof HTMLElement)){throw new Error("You must provide a valid dom element")}var t=window.getComputedStyle(e);return["width","padding-left","padding-right"].map((function(e){var r=parseInt(t.getPropertyValue(e),10);return isNaN(r)?0:r})).reduce((function(e,t){return e+t}))};e.prototype.destroy=function(){this.removeListeners()};return e}();var h=':host{font-family:var(--fw-font-family, -apple-system, blinkmacsystemfont, "Segoe UI", roboto, oxygen, ubuntu, cantarell, "Open Sans", "Helvetica Neue", sans-serif);-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale;-webkit-box-sizing:border-box;box-sizing:border-box}.drag-container{display:block}';var u=e("fw_drag_container",function(){function e(e){t(this,e);this.fwDrop=r(this,"fwDrop",7);this.acceptFrom="";this.addOnDrop=true;this.copy=true;this.placeholderClass="";this.sortable=true}e.prototype.componentWillLoad=function(){this.containerInstance=new p(this.host,{acceptFrom:this.acceptFrom,addOnDrop:this.addOnDrop,copy:this.copy,placeholderClass:this.placeholderClass,sortable:this.sortable});this.host.addEventListener("fwDropBase",this.emitFwDrop.bind(this))};e.prototype.emitFwDrop=function(e){this.fwDrop.emit(e["detail"])};e.prototype.disconnectedCallback=function(){var e;(e=this.containerInstance)===null||e===void 0?void 0:e.destroy();this.host.removeEventListener("fwDropBase",this.emitFwDrop)};e.prototype.render=function(){return n(o,{class:"drag-container"})};Object.defineProperty(e.prototype,"host",{get:function(){return i(this)},enumerable:false,configurable:true});return e}());u.style=h}}}));